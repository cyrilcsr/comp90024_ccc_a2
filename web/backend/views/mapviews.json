{
    "_id": "_design/mapviews",
    "language": "javascript",
    "views": {
        "positive_score": {
            "map": "function(doc){ if(doc.sentiment_score > 0) { emit(doc.city, 1) } }",
            "reduce": "_count"
        },
        "other_score": {
            "map": "function(doc){ if(doc.sentiment_score <= 0) { emit(doc.city, 1) } }",
            "reduce": "_count"
        },
        "vaccine_trend": {
            "map": "function(doc){ emit(doc.created_at, doc.sentiment_score) }",
            "reduce": "_count"
        },
        "posneg_vaccine_trend": {
            "map": "function(doc){ var flag = doc.sentiment_score >= 0 ? 'pos' : 'neg'; emit([doc.created_at, flag, doc.city], doc.sentiment_score) }",
            "reduce": "_count"
        },
        "city_total_sentiment_score": {
            "map": "function(doc){ if(doc.city !== 'Australia') { emit(doc.city, doc.sentiment_score) } }",
            "reduce": "_sum"
        },
        "sentiment_distribution": {
            "map": "function(doc){ if(doc.city !== 'Australia') { emit([doc.city, doc.sentiment_score], 1) } }",
            "reduce": "_count"
        },
        "brand_count": {
            "map": "function(doc){ if(doc.vaccine_brand){ emit(doc.vaccine_brand, 1) } }",
            "reduce": "_count"
        },
        "city_count": {
            "map": "function(doc){ if(doc.city !== 'Australia'){ emit(doc.city, 1) } }",
            "reduce": "_count"
        },
        "get_the_greens_data": {
            "map": "function(doc){ if(doc.the_greens) { emit(doc.key, doc.the_greens) } }"
        },
        "get_the_nationals_data": {
            "map": "function(doc){ if(doc.the_nationals) { emit(doc.key, doc.the_nationals) } }"
        },
        "get_liberal_data": {
            "map": "function(doc){ if(doc.liberal) { emit(doc.key, doc.liberal) } }"
        },
        "get_australian_labor_party_data": {
            "map": "function(doc){ if(doc.australian_labor_party) { emit(doc.key, doc.australian_labor_party) } }"
        },
        "get_the_greens_stats": {
            "map": "function(doc){ if(doc.the_greens) { emit([doc.state, doc.the_greens], 1) } }",
            "reduce": "_count"
        },
        "get_the_nationals_stats": {
            "map": "function(doc){ if(doc.the_nationals) { emit([doc.state, doc.the_nationals], 1) } }",
            "reduce": "_count"
        },
        "get_liberal_stats": {
            "map": "function(doc){ if(doc.liberal) { emit([doc.state, doc.liberal], 1) } }",
            "reduce": "_count"
        },
        "get_australian_labor_party_stats": {
            "map": "function(doc){ if(doc.australian_labor_party) { emit([doc.state, doc.australian_labor_party], 1) } }",
            "reduce": "_count"
        }
    }
  }